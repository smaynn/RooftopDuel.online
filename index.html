<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rooftop Duel - Ragdoll Physics Shooter Game | rooftopduel.online</title>
    <meta name="description" content="Play Rooftop Duel - a physics-based ragdoll shooter where you battle on city rooftops. No downloads needed, just jump in and play!">
    <link rel="canonical" href="https://rooftopduel.online">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        apple: {
                            blue: '#007AFF',
                            green: '#34C759',
                            indigo: '#5856D6',
                            orange: '#FF9500',
                            pink: '#FF2D55',
                            purple: '#AF52DE',
                            red: '#FF3B30',
                            teal: '#5AC8FA',
                            yellow: '#FFCC00',
                            gray: {
                                100: '#F2F2F7',
                                200: '#E5E5EA',
                                300: '#D1D1D6',
                                400: '#C7C7CC',
                                500: '#AEAEB2',
                                600: '#8E8E93',
                                700: '#636366',
                                800: '#48484A',
                                900: '#3A3A3C',
                                950: '#1C1C1E',
                            }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/css">
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            overflow: hidden;
            background-color: #000;
        }
        
        .game-container iframe,
        .game-container object,
        .game-container embed,
        .safari-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Loading indicator */
        .game-loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            z-index: 5;
        }
        
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #007AFF;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        /* Safari container */
        .safari-container {
            z-index: 1;
            display: none; /* Hidden by default, shown for Safari */
            overflow: hidden;
            background-color: #000;
        }
        
        /* Game controls overlay */
        .game-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            z-index: 4;
        }
        
        .game-controls button {
            margin: 0 5px;
            padding: 8px 16px;
            background-color: #007AFF;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 640px) {
            .game-container {
                padding-bottom: 75%; /* Adjust aspect ratio for mobile */
            }
        }

        /* Safari-specific help message */
        .safari-helper {
            position: absolute;
            top: 10px;
            left: 0;
            width: 100%;
            text-align: center;
            z-index: 6;
            display: none;
        }
        
        .safari-helper .message {
            display: inline-block;
            padding: 8px 16px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body class="bg-apple-gray-100 dark:bg-apple-gray-950 text-apple-gray-900 dark:text-white">
    <header class="bg-apple-blue text-white py-6 px-4 md:px-8 shadow-lg">
        <div class="container mx-auto max-w-6xl">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div>
                    <h1 class="text-3xl md:text-4xl font-bold tracking-tight">Rooftop Duel-马寅的第一个游戏站</h1>
                    <p class="mt-2 text-lg md:text-xl font-light">Can you handle a rooftop shoot-out with gravity, ragdoll limbs, and a toybox of overpowered weapons?</p>
                </div>
                <nav class="mt-4 md:mt-0">
                    <ul class="flex space-x-6">
                        <li><a href="#game" class="hover:text-apple-yellow transition-colors">Play Now</a></li>
                        <li><a href="#about" class="hover:text-apple-yellow transition-colors">About</a></li>
                        <li><a href="#controls" class="hover:text-apple-yellow transition-colors">Controls</a></li>
                        <li><a href="#modes" class="hover:text-apple-yellow transition-colors">Game Modes</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="container mx-auto max-w-6xl px-4 md:px-8 py-8">
        <section id="game" class="mb-12">
            <h2 class="text-2xl md:text-3xl font-bold mb-6 text-apple-blue dark:text-apple-teal">Play Rooftop Duel</h2>
            <div class="game-container rounded-xl overflow-hidden shadow-xl relative">
                <!-- Loading indicator -->
                <div class="game-loading" id="gameLoading">
                    <div class="loader"></div>
                    <p>Loading game...</p>
                </div>
                
                <!-- Safari helper message -->
                <div class="safari-helper" id="safariHelper">
                    <div class="message">
                        Game loaded! Click or press any key to focus.
                    </div>
                </div>
                
                <!-- Standard iframe (for Chrome, Firefox, etc.) -->
                <iframe 
                    id="gameFrame" 
                    src="https://cloud.onlinegames.io/games/2025/construct/213/rooftop-duel/index-og.html" 
                    allowfullscreen="true"
                    allow="fullscreen; autoplay; clipboard-write" 
                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-downloads"
                    frameborder="0"
                    loading="eager"
                    title="Rooftop Duel Game"
                    style="display:none;">
                </iframe>
                
                <!-- Safari-specific container -->
                <div class="safari-container" id="safariContainer">
                    <!-- Will be populated via JavaScript for Safari -->
                </div>
                
                <!-- Game controls (mainly for Safari) -->
                <div class="game-controls" id="gameControls">
                    <button id="jumpBtn">Jump (W)</button>
                    <button id="aimBtn">Aim (E)</button>
                    <button id="shootBtn">Shoot</button>
                    <button id="reloadBtn">Reload Game</button>
                </div>
            </div>
            <div class="mt-2 p-2 bg-apple-gray-200 dark:bg-apple-gray-800 rounded-lg text-center text-sm">
                <p id="gameHint">Press W to jump, hold E to aim, and release to shoot.</p>
            </div>
        </section>

        <section id="about" class="mb-12">
            <h2 class="text-2xl md:text-3xl font-bold mb-6 text-apple-blue dark:text-apple-teal">About Rooftop Duel</h2>
            <div class="bg-white dark:bg-apple-gray-900 rounded-xl p-6 shadow-md">
                <p class="mb-4">Rooftop Duel piles all the goofy physics of classic ragdoll games. You'll try to knock off your opponent on a city rooftop. Press play and you hop straight into a duel; There are no downloads, no sign-ups; just jump, aim, and laugh as you and your opponent rocket each other off narrow city rooftops.</p>
                
                <p class="mb-4">The recoil is wild here! Grab a friend or fly solo, hit Play, and see how long you can stay on the roof. Just don't blame the game when you're laughing too hard to aim straight!</p>
                
                <div class="mt-6">
                    <h3 class="text-xl font-semibold mb-3 text-apple-purple dark:text-apple-pink">How to Play</h3>
                    <p class="mb-4">Once the round loads, both ragdoll fighters try to balance on a rooftop. Tap jump, hold to aim, then let go to shoot. Every shot packs recoil, so a blast can rescue you from the edge or fling you into mid-air.</p>
                    
                    <p class="mb-4">Floaty jumps give you a moment to dodge an incoming bullet, or if you mistime things, you'll sail straight into the abyss. If you stay up while your opponent falls, you win the round, collect coins, and head back to the shop for an even sillier weapon before the next rooftop showdown.</p>
                </div>
                
                <div class="mt-6">
                    <h3 class="text-xl font-semibold mb-3 text-apple-purple dark:text-apple-pink">Developer</h3>
                    <p>Rooftop Duel is cooked up by FreezeNova, the studio behind a stack of popular unblocked ragdoll games like Soccer Random Pro.</p>
                </div>
            </div>
        </section>

        <section id="controls" class="mb-12">
            <h2 class="text-2xl md:text-3xl font-bold mb-6 text-apple-blue dark:text-apple-teal">Game Controls</h2>
            <div class="bg-white dark:bg-apple-gray-900 rounded-xl p-6 shadow-md">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-apple-orange">Player 1 Controls</h3>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-apple-gray-200 dark:bg-apple-gray-800">
                                    <th class="p-3 text-left">Action</th>
                                    <th class="p-3 text-left">Key</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-apple-gray-200 dark:border-apple-gray-800">
                                    <td class="p-3">Jump</td>
                                    <td class="p-3">W / Right Mouse</td>
                                </tr>
                                <tr class="border-b border-apple-gray-200 dark:border-apple-gray-800">
                                    <td class="p-3">Aim</td>
                                    <td class="p-3">Hold E / Left Mouse</td>
                                </tr>
                                <tr>
                                    <td class="p-3">Shoot</td>
                                    <td class="p-3">Release E / Release Left-Mouse</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-apple-orange">Player 2 Controls</h3>
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-apple-gray-200 dark:bg-apple-gray-800">
                                    <th class="p-3 text-left">Action</th>
                                    <th class="p-3 text-left">Key</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-apple-gray-200 dark:border-apple-gray-800">
                                    <td class="p-3">Jump</td>
                                    <td class="p-3">I</td>
                                </tr>
                                <tr class="border-b border-apple-gray-200 dark:border-apple-gray-800">
                                    <td class="p-3">Aim</td>
                                    <td class="p-3">Hold O</td>
                                </tr>
                                <tr>
                                    <td class="p-3">Shoot</td>
                                    <td class="p-3">Release O</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="mt-6 p-4 bg-apple-gray-100 dark:bg-apple-gray-800 rounded-lg">
                    <p class="text-apple-green dark:text-apple-green font-medium">Note: The 2 Player mode is only available on devices with a keyboard (laptops and desktops). If you're using a mobile device, try the other game modes instead.</p>
                </div>
            </div>
        </section>

        <section id="modes" class="mb-12">
            <h2 class="text-2xl md:text-3xl font-bold mb-6 text-apple-blue dark:text-apple-teal">Game Modes</h2>
            <div class="bg-white dark:bg-apple-gray-900 rounded-xl p-6 shadow-md">
                <div class="space-y-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-3 text-apple-red">2 Player Mode</h3>
                        <p>Local multiplayer mode where two players share the same keyboard. Each player uses their own set of keys to jump and shoot. First player uses W and E while the second uses I and O keys. The round continues until one player knocks the other off the rooftop. You'll play 5 rounds to complete a match. This mode is only available on devices with a keyboard, so it is best played on a laptop or desktop.</p>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-3 text-apple-red">Missions Mode</h3>
                        <p>A series of short levels, each with a specific objective. It's a good place to start if you want to get used to the controls, learn how different weapons behave, and see new rooftops each round.</p>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-3 text-apple-red">Survivor Mode</h3>
                        <p>The goal is to stay alive for as long as possible. You'll face a continuous wave of enemies. The difficulty increases the longer you last. This mode requires a bit quicker reactions and good control compared to other modes. It's recommended to unlock more powerful weapons before playing, as basic gear can make it difficult to survive for long.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="tips" class="mb-12">
            <h2 class="text-2xl md:text-3xl font-bold mb-6 text-apple-blue dark:text-apple-teal">Pro Tips & Strategies</h2>
            <div class="bg-white dark:bg-apple-gray-900 rounded-xl p-6 shadow-md">
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold mb-2 text-apple-orange">Master the Recoil</h3>
                        <p>The recoil from your shots can be both a blessing and a curse. Use it strategically to propel yourself back to safety when teetering on the edge, or to make a quick aerial escape.</p>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2 text-apple-orange">Weapon Selection</h3>
                        <p>Different weapons have different recoil patterns and strengths. Experiment with various weapons in the shop to find one that suits your playstyle, especially before tackling Survivor Mode.</p>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2 text-apple-orange">Timing is Everything</h3>
                        <p>Perfectly timed jumps can help you dodge incoming bullets. Similarly, timing your shots can catch opponents in mid-air, making it harder for them to recover.</p>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2 text-apple-orange">Collect Those Coins</h3>
                        <p>Make sure to collect coins after winning rounds. These let you unlock better weapons in the shop, giving you an edge in future battles, especially in Survivor Mode.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-apple-gray-900 text-white py-10 px-4 md:px-8">
        <div class="container mx-auto max-w-6xl">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h2 class="text-xl font-bold mb-4 text-apple-yellow">Rooftop Duel</h2>
                    <p class="text-apple-gray-400">A physics-based ragdoll shooter where you battle on city rooftops. No downloads, just jump in and play!</p>
                </div>
                <div>
                    <h2 class="text-xl font-bold mb-4 text-apple-yellow">Quick Links</h2>
                    <ul class="space-y-2">
                        <li><a href="#game" class="text-apple-gray-400 hover:text-white transition-colors">Play Game</a></li>
                        <li><a href="#about" class="text-apple-gray-400 hover:text-white transition-colors">About</a></li>
                        <li><a href="#controls" class="text-apple-gray-400 hover:text-white transition-colors">Controls</a></li>
                        <li><a href="#modes" class="text-apple-gray-400 hover:text-white transition-colors">Game Modes</a></li>
                        <li><a href="#tips" class="text-apple-gray-400 hover:text-white transition-colors">Pro Tips</a></li>
                    </ul>
                </div>
                <div>
                    <h2 class="text-xl font-bold mb-4 text-apple-yellow">Developer</h2>
                    <p class="text-apple-gray-400">Rooftop Duel is created by FreezeNova, known for popular ragdoll games.</p>
                    <p class="mt-4 text-apple-gray-400">Have questions or feedback about Rooftop Duel?</p>
                    <p class="mt-2"><a href="mailto:contact@rooftopduel.online" class="text-apple-blue hover:text-apple-teal transition-colors">contact@rooftopduel.online</a></p>
                </div>
            </div>
            <div class="mt-10 pt-6 border-t border-apple-gray-800 text-center text-apple-gray-500">
                <p>&copy; 2025 rooftopduel.online. All rights reserved. Rooftop Duel is a trademark of its respective owner.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const iframe = document.getElementById('gameFrame');
            const loading = document.getElementById('gameLoading');
            const safariContainer = document.getElementById('safariContainer');
            const gameControls = document.getElementById('gameControls');
            const gameHint = document.getElementById('gameHint');
            const safariHelper = document.getElementById('safariHelper');
            const jumpBtn = document.getElementById('jumpBtn');
            const aimBtn = document.getElementById('aimBtn');
            const shootBtn = document.getElementById('shootBtn');
            const reloadBtn = document.getElementById('reloadBtn');
            
            // Game URL
            const gameUrl = 'https://cloud.onlinegames.io/games/2025/construct/213/rooftop-duel/index-og.html';
            
            // Detect Safari browser
            const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
            const isiOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            
            // Safari-specific solutions
            if (isSafari) {
                // Hide standard iframe, show Safari container
                iframe.style.display = 'none';
                safariContainer.style.display = 'block';
                
                // Method 1: Try object tag
                const objectEmbed = document.createElement('object');
                objectEmbed.data = gameUrl;
                objectEmbed.type = 'text/html';
                objectEmbed.width = '100%';
                objectEmbed.height = '100%';
                objectEmbed.setAttribute('id', 'gameObject');
                safariContainer.appendChild(objectEmbed);
                
                // Method 2: Backup with embed tag if object fails
                setTimeout(function() {
                    if (loading.style.display !== 'none') {
                        safariContainer.innerHTML = ''; // Clear container
                        
                        const embedTag = document.createElement('embed');
                        embedTag.src = gameUrl;
                        embedTag.type = 'text/html';
                        embedTag.width = '100%';
                        embedTag.height = '100%';
                        embedTag.setAttribute('id', 'gameEmbed');
                        safariContainer.appendChild(embedTag);
                        
                        // Show game controls for Safari
                        setTimeout(() => {
                            loading.style.display = 'none';
                            gameControls.style.display = 'flex';
                            safariHelper.style.display = 'block';
                            
                            // Hide helper message after a while
                            setTimeout(() => {
                                safariHelper.style.display = 'none';
                            }, 5000);
                        }, 4000);
                    }
                }, 5000);
                
                // Method 3: Final fallback - direct iframe with minimal restrictions
                setTimeout(function() {
                    if (loading.style.display !== 'none') {
                        safariContainer.innerHTML = ''; // Clear container
                        
                        const directIframe = document.createElement('iframe');
                        directIframe.src = gameUrl;
                        directIframe.width = '100%';
                        directIframe.height = '100%';
                        directIframe.style.border = 'none';
                        directIframe.setAttribute('allowfullscreen', 'true');
                        // Minimal sandbox to increase chances of working
                        directIframe.setAttribute('sandbox', 'allow-same-origin allow-scripts allow-popups allow-forms');
                        safariContainer.appendChild(directIframe);
                        
                        // Show game controls and hide loading after another delay
                        setTimeout(() => {
                            loading.style.display = 'none';
                            gameControls.style.display = 'flex';
                        }, 3000);
                    }
                }, 10000);
                
                // Safari-specific game controls
                jumpBtn.addEventListener('click', function() {
                    simulateKeyPress('W');
                });
                
                aimBtn.addEventListener('mousedown', function() {
                    simulateKeyDown('E');
                });
                
                aimBtn.addEventListener('mouseup', function() {
                    simulateKeyUp('E');
                });
                
                shootBtn.addEventListener('click', function() {
                    simulateKeyPress('E');
                });
                
                reloadBtn.addEventListener('click', function() {
                    // Reload the game container with a fresh URL (cache-busting)
                    loading.style.display = 'flex';
                    safariContainer.innerHTML = '';
                    
                    const refreshIframe = document.createElement('iframe');
                    refreshIframe.src = gameUrl + '?refresh=' + Date.now();
                    refreshIframe.width = '100%';
                    refreshIframe.height = '100%';
                    refreshIframe.style.border = 'none';
                    refreshIframe.setAttribute('allowfullscreen', 'true');
                    safariContainer.appendChild(refreshIframe);
                    
                    setTimeout(() => {
                        loading.style.display = 'none';
                    }, 5000);
                });
                
                // Update hint for Safari users
                gameHint.textContent = "Safari users: Try using the control buttons below the game if keyboard controls don't respond.";
            } else {
                // Standard approach for Chrome, Firefox, etc.
                iframe.style.display = 'block';
                
                // Handle iframe load
                iframe.addEventListener('load', function() {
                    loading.style.display = 'none';
                    iframe.focus();
                });
                
                // Fallback timeout
                setTimeout(function() {
                    loading.style.display = 'none';
                }, 8000);
            }
            
            // Helper function to simulate key press in Safari
            function simulateKeyPress(key) {
                const keyDownEvent = new KeyboardEvent('keydown', {
                    key: key,
                    code: 'Key' + key,
                    keyCode: key.charCodeAt(0),
                    which: key.charCodeAt(0),
                    bubbles: true,
                    cancelable: true
                });
                
                const keyUpEvent = new KeyboardEvent('keyup', {
                    key: key,
                    code: 'Key' + key,
                    keyCode: key.charCodeAt(0),
                    which: key.charCodeAt(0),
                    bubbles: true,
                    cancelable: true
                });
                
                document.dispatchEvent(keyDownEvent);
                setTimeout(() => {
                    document.dispatchEvent(keyUpEvent);
                }, 100);
            }
            
            // Helper functions for key down/up
            function simulateKeyDown(key) {
                const keyDownEvent = new KeyboardEvent('keydown', {
                    key: key,
                    code: 'Key' + key,
                    keyCode: key.charCodeAt(0),
                    which: key.charCodeAt(0),
                    bubbles: true,
                    cancelable: true
                });
                document.dispatchEvent(keyDownEvent);
            }
            
            function simulateKeyUp(key) {
                const keyUpEvent = new KeyboardEvent('keyup', {
                    key: key,
                    code: 'Key' + key,
                    keyCode: key.charCodeAt(0),
                    which: key.charCodeAt(0),
                    bubbles: true,
                    cancelable: true
                });
                document.dispatchEvent(keyUpEvent);
            }
        });
    </script>
</body>
</html>
